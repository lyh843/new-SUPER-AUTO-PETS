# Super Auto Pets - 商店功能实现说明

## 📋 项目概述

本项目成功实现了 Super Auto Pets 游戏的基础商店功能和 GUI 界面，使用 C++ 和 Qt 6 框架开发。

## ✅ 已实现的功能

### 1. 核心模型类

#### Player（玩家类）
- ✅ 金币管理系统（初始 10 金币）
- ✅ 生命值系统（初始 5 生命）
- ✅ 回合数追踪
- ✅ 奖杯数追踪
- ✅ 宠物阵容管理（最多 5 只宠物）
- ✅ 宠物添加、移除、查询功能
- ✅ 相同宠物自动合并升级机制

#### Pet（宠物类）
已实现 **8 种不同的宠物**：

1. **猫** (Tier 1)
   - 生命: 4, 攻击: 3
   - 基础宠物

2. **蚂蚁** (Tier 1)
   - 生命: 2, 攻击: 1
   - 技能: 死亡时给随机友方宠物 +2/+1

3. **鱼** (Tier 1)
   - 生命: 3, 攻击: 2
   - 技能: 升级时给随机两个友方宠物 +1/+1

4. **蟋蟀** (Tier 1)
   - 生命: 1, 攻击: 2
   - 技能: 死亡时召唤一只蜜蜂

5. **天鹅** (Tier 2)
   - 生命: 3, 攻击: 1
   - 技能: 回合开始时获得 1 金币

6. **火烈鸟** (Tier 2)
   - 生命: 3, 攻击: 2
   - 技能: 战斗结束时如果存活获得 +2 攻击

7. **刺猬** (Tier 2)
   - 生命: 3, 攻击: 1
   - 技能: 受到伤害时对敌人造成等量伤害

8. **孔雀** (Tier 3)
   - 生命: 2, 攻击: 5
   - 技能: 受到攻击前获得 50% 伤害减免

**宠物系统特性**：
- ✅ 宠物升级系统（最高 3 级）
- ✅ 经验系统（每 2 点经验升 1 级）
- ✅ 升级时自动增加属性（+50% 基础属性）
- ✅ 食物效果应用系统
- ✅ 特殊标记系统（护甲、复活、护盾等）

#### Food（食物类）
已实现 **9 种不同的食物**：

1. **苹果** (Tier 1, 3💰)
   - 效果: +1 生命 +1 攻击

2. **蜂蜜** (Tier 1, 3💰)
   - 效果: 战斗开始召唤蜜蜂

3. **骨头** (Tier 1, 3💰)
   - 效果: +3 攻击

4. **大蒜** (Tier 2, 6💰)
   - 效果: +2 生命，+1 护甲

5. **色拉** (Tier 2, 6💰)
   - 效果: +1 攻击 +2 生命

6. **罐头** (Tier 2, 6💰)
   - 效果: +2 攻击 +2 生命

7. **西瓜** (Tier 3, 9💰)
   - 效果: 战斗开始获得 50% 伤害减免

8. **蘑菇** (Tier 3, 9💰)
   - 效果: 死亡时复活一次

9. **梨子** (Tier 1, 3💰)
   - 效果: +2 攻击 +1 生命

#### Shop（商店类）
- ✅ 随机生成商店宠物（3 个格子）
- ✅ 随机生成商店食物（2 个格子）
- ✅ 购买宠物功能（3 金币）
- ✅ 购买食物功能（不同价格）
- ✅ 出售宠物功能（获得 1 金币）
- ✅ 刷新商店功能（1 金币）
- ✅ 冻结/解冻功能（保留商品到下回合）
- ✅ 智能宠物合并系统

### 2. GUI 界面

#### ShopView（商店视图）
实现了完整的商店界面，包括：

**界面布局**：
- ✅ 顶部玩家信息栏
  - 💰 金币显示
  - ❤️ 生命值显示
  - 🔄 回合数显示
  - 🏆 奖杯数显示

- ✅ 玩家宠物阵容区
  - 5 个宠物槽位
  - 显示宠物名称、属性、等级
  - 点击可出售宠物

- ✅ 商店宠物区
  - 3 个宠物商品槽位
  - 显示宠物详细信息
  - 点击购买

- ✅ 商店食物区
  - 2 个食物商品槽位
  - 显示食物名称和价格
  - 点击选择目标宠物后购买

- ✅ 操作按钮
  - 🔄 刷新商店按钮（1 金币）
  - ✅ 结束回合按钮（进入战斗）

**UI 特性**：
- ✅ 现代化美观界面
- ✅ 卡片式设计
- ✅ 不同状态的颜色区分
- ✅ 表情符号增强可读性
- ✅ 交互式按钮和提示
- ✅ 消息框反馈系统

#### PetCard（宠物卡片组件）
- ✅ 显示宠物名称
- ✅ 显示生命值和攻击力（❤️ ⚔️）
- ✅ 显示等级和经验
- ✅ 购买/出售按钮
- ✅ 空槽位显示

#### FoodCard（食物卡片组件）
- ✅ 显示食物名称
- ✅ 显示食物价格（💰）
- ✅ 购买按钮
- ✅ 空槽位显示

### 3. 游戏逻辑

#### 购买系统
- ✅ 金币检查机制
- ✅ 自动扣除金币
- ✅ 购买失败自动退款
- ✅ 阵容已满提示
- ✅ 相同宠物自动合并升级

#### 出售系统
- ✅ 确认对话框
- ✅ 自动获得金币
- ✅ 清空槽位

#### 刷新系统
- ✅ 随机生成新商品
- ✅ 保留冻结的商品
- ✅ 金币消耗系统

#### 回合系统
- ✅ 回合结束确认
- ✅ 新回合开始
- ✅ 自动获得金币（10 金币/回合）
- ✅ 商店重置

### 4. 主程序

#### MainWindow（主窗口）
- ✅ 应用程序入口
- ✅ 窗口管理
- ✅ 标题栏（🎮 Super Auto Pets）
- ✅ 欢迎消息
- ✅ 游戏规则说明
- ✅ 回合结束处理
- ✅ 战斗模拟（简化版）

## 🎮 游戏流程

1. **游戏开始**
   - 玩家获得 10 金币
   - 商店随机生成 3 只宠物和 2 个食物

2. **商店阶段**
   - 购买宠物（3 金币）
   - 购买食物喂养宠物
   - 出售不需要的宠物（获得 1 金币）
   - 刷新商店寻找更好的商品（1 金币）
   - 相同宠物会自动合并升级

3. **回合结束**
   - 点击"结束回合"按钮
   - 进入战斗（目前简化处理）
   - 获得战斗结果

4. **新回合开始**
   - 回合数 +1
   - 获得 10 金币
   - 商店自动刷新

## 📁 项目结构

```
super_auto_pets/
├── src/
│   ├── main.cpp                # 主程序入口
│   ├── model/                  # 数据模型层
│   │   ├── Pet.hpp/.cpp       # 宠物类（含8种宠物）
│   │   ├── Player.hpp/.cpp    # 玩家类
│   │   ├── Shop.hpp/.cpp      # 商店类
│   │   ├── Food.hpp/.cpp      # 食物类（含9种食物）
│   │   └── Skill.hpp/.cpp     # 技能类（基础）
│   ├── ui/                     # UI 层
│   │   ├── ShopView.hpp/.cpp  # 商店视图
│   │   └── BattleView.hpp/.cpp # 战斗视图（待完善）
│   └── engine/                 # 游戏引擎层
│       └── BattleEngine.hpp/.cpp # 战斗引擎
├── CMakeLists.txt              # CMake 配置
├── CMakePresets.json           # CMake 预设
├── build_instructions.md       # 编译说明
└── 功能说明.md                 # 本文件
```

## 🎨 技术亮点

1. **现代 C++ 设计**
   - C++20 标准
   - 智能指针（unique_ptr）管理内存
   - RAII 原则
   - 移动语义

2. **面向对象设计**
   - 清晰的类层次结构
   - 封装良好的接口
   - 模板元编程（宠物注册系统）

3. **Qt 框架应用**
   - 信号槽机制
   - 现代化 UI 组件
   - 布局管理系统
   - MOC 元对象编译

4. **游戏设计模式**
   - 工厂模式（食物创建）
   - 注册模式（宠物类型注册）
   - MVC 架构分离

## 🔧 技术栈

- **语言**: C++20
- **GUI 框架**: Qt 6.10.0
- **编译器**: MinGW 13.1.0 / MSVC（可选）
- **构建系统**: CMake 3.5+
- **IDE**: 任意支持 CMake 的 IDE

## 📝 使用说明

### 基本操作

1. **购买宠物**
   - 点击商店区域的宠物卡片
   - 确保有 3 金币
   - 确保阵容有空位
   - 相同宠物会自动合并升级

2. **购买食物**
   - 点击食物卡片
   - 从弹出的对话框中选择目标宠物
   - 确保有足够的金币
   - 食物效果立即生效

3. **出售宠物**
   - 点击自己阵容中的宠物卡片
   - 确认出售
   - 获得 1 金币

4. **刷新商店**
   - 点击"刷新商店"按钮
   - 消耗 1 金币
   - 获得新的商品

5. **结束回合**
   - 点击"结束回合"按钮
   - 进入战斗（目前简化）
   - 新回合开始，获得 10 金币

### 游戏技巧

1. **金币管理**
   - 初始 10 金币要合理分配
   - 刷新商店需要考虑成本
   - 出售宠物可以回收金币

2. **宠物搭配**
   - Tier 1 宠物性价比高
   - 相同宠物可以升级
   - 关注宠物的协同效果

3. **升级策略**
   - 每 2 点经验升 1 级
   - 购买相同宠物可获得经验
   - 升级后属性大幅提升

## 🚀 后续开发方向

1. **战斗系统完善**
   - 完整的战斗逻辑
   - 技能效果实现
   - 战斗动画

2. **更多内容**
   - 更多宠物类型
   - 更多食物类型
   - 更多技能效果

3. **UI 增强**
   - 战斗场景界面
   - 动画效果
   - 音效支持

4. **游戏模式**
   - 单人模式
   - 联机对战
   - 排行榜系统

## 🎯 总结

本项目成功实现了 Super Auto Pets 的核心商店功能和现代化的 GUI 界面，为后续的战斗系统和更多功能奠定了坚实的基础。代码结构清晰，易于扩展和维护。

